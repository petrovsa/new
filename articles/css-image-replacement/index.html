<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.0.1"/><title data-react-helmet="true">Веб-стандарты</title><meta data-react-helmet="true" name="description" content="Сообщество разработчиков «Веб-стандарты»"/><meta data-react-helmet="true" name="keywords" content="web standards"/><link as="script" rel="preload" href="/0-152a6e34a5c4bf7cd8a5.js"/><link as="script" rel="preload" href="/component---src-templates-article-jsx-da40a148dbaf87f71d30.js"/><link as="script" rel="preload" href="/app-fdf6317c57abdf654ada.js"/><link as="script" rel="preload" href="/webpack-runtime-1400fd0a68f967e222fb.js"/><link rel="preload" href="/static/d/804/path---articles-css-image-replacement-553-74a-2FAYg6KoQt5jhFl0ZGPYfNidug.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><header class="header"><h1>Веб-стандарты</h1></header><main><h1>Ещё одна CSS-техника замены текста изображением</h1><time>10 сентября 2012</time><div><h1>Ещё одна CSS-техника замены текста изображением</h1>
<p><a href="http://nicolasgallagher.com/">Николас Галлахер</a> 10 сентября 2012</p>
<p>Недавно в проект <a href="https://github.com/h5bp/html5-boilerplate">HTML5 Boilerplate</a> была добавлена новая техника замены текста изображением. В этой записи я расскажу, как она работает и как соотносится с альтернативными методами.</p>
<p>Ниже приведен CSS <a href="https://github.com/h5bp/html5-boilerplate/commit/aa0396eae757c9e03dda4e463fb0d4db5a5f82d7">недавно обновлённого</a> вспомогательного класса (для замены текста изображением) из HTML5 Boilerplate. Этот код также попал во фреймворк <a href="http://compass-style.org/">Compass</a>.</p>
<pre><code>.ir {
    font: 0/0 a;
     text-shadow: none;
    color: transparent;
 }
</code></pre>
<h2>Что делает каждая из деклараций?</h2>
<ul>
<li><code>font:0/0 a</code> — сокращенная запись свойства, обнуляет размер шрифта и высоту строки. Значение <code>a</code> здесь выступает в роли очень короткого <code>font-family</code> (идея, взята <a href="https://github.com/bem/bem-bl/blob/c451e7bd44b298d23c7fff9bfafe1f0a514f6aaf/blocks-desktop/b-icon/b-icon.css">из реализации этого метода в БЭМ</a>). Валидатор CSS ругается, что использование <code>0/0</code> в сокращенной форме свойства <code>font</code> не соответствует стандарту, но все браузеры принимают такое объявление, и это, по-видимому, баг в самом валидаторе. Использование <code>font:0px/0 a</code> позволяет пройти валидацию, но все равно — в коде декларация отображается как <code>font:0/0 a</code>, который валидатор пропускает.</li>
<li><code>text-shadow:none</code> — гарантированно снимает любую унаследованную тень текста. Это предотвращает появление любых остатков тени от текста поверх фона.</li>
<li><code>color:transparent</code> — декларация для браузеров, которые не уменьшают текст полностью (до состояния невидимости). Safari 4 — пример (чрезвычайно редкий) такого браузера. Также эта декларация может быть нужна мобильным браузерам. IE6-8 не распознаёт такое значение свойства <code>color</code>, но, к счастью, IE7-8 и без него не показывают никаких следов от текста. IE6 отображает бледный след.</li>
</ul>
<p>Во вспомогательном классе в HTML5 Boilerplate мы также обнуляем всё, что касается свойств <code>border</code> и <code>background-color</code>, которые могут быть заданы у элементов. Это упрощает использование вспомогательных классов для элементов типа <code>&#x3C;button></code> или ссылках, у которых по дизайну может быть задан фон или рамка.</p>
<h3>Преимущества перед методами с text-indent</h3>
<p>Новая техника позволяет избежать различных проблем, присущих методам, основанным на использовании <code>text-indent</code>, включая предложенный <a href="http://www.zeldman.com/2012/03/01/replacing-the-9999px-hack-new-image-replacement/">Скотом Келумом</a> cпособ избежать проблем с производительностью на iPad 1, связанных с большими отрицательными отступами.</p>
<ul>
<li>Работает в IE6-7 для элементов с <code>inline-block</code>. Техники, основанные на использовании <code>text-indent</code> изначально «сломаны» для <code>inline-block</code> элементах, в этом можно убедиться на <a href="http://jsfiddle.net/necolas/QZvYa/show/">этом примере</a>.</li>
<li>Не приводит к созданию контейнеров, выходящих за пределы экрана. Методы с <code>text-indent</code> приводят к отрисовке блока (иногда выходящего за экран) для любого текста, у которого есть положительный или отрицательный отступ. Иногда это приводит к проблемам с производительностью, но методы, основанные на размере шрифта, обходят эти проблемы.</li>
<li>Не нужно указывать особенный <code>text-align</code> и обрезать контейнер свойством <code>overflow</code>, так как текст сжат и не занимает места.</li>
<li>Не нужно скрывать <code>br</code> или задавать всему дополнительному HTML <code>display:inline</code>, чтобы обойти ограничения отступа текста. В новом методе таких проблем нет.</li>
<li>В результате этих доработок сократилось количество стилей.</li>
</ul>
<h2>Недостатки</h2>
<p>Совершенного метода заметы изображений не существует.</p>
<ul>
<li>Оставляет бледный след от текста в IE6.</li>
<li>С этим подходом невозможно использовать единицы <code>em</code> для полей элементов, которые используют эту технику, потому что размер шрифта равен нулю.</li>
<li>В Windows-Eyes есть баг, мешающий чтению текста, спрятанного этим методом. Ни в одной другой протестированной программе для чтения с экрана никаких проблем не было. Спасибо <a href="http://twitter.com/jkiss">@jkiss</a> за предоставленные <a href="https://github.com/h5bp/html5-boilerplate/commit/aa0396eae757c9e03dda4e463fb0d4db5a5f82d7#commitcomment-1052728">детальные отчеты</a> и <a href="http://twitter.com/wilto">@wilto</a> за подтверждение работоспособности этого метода в JAWS 12 для IE6-8 и для Firefox 4-6.</li>
<li>Как и многие другие методы замены изображений, он не работает, когда CSS загружен, а изображения — нет.</li>
<li>Текст может оказаться не скрытым, если посетитель сайта использует пользовательские стили, в которых явно объявляется важность <code>font-size</code> для элементов, к которым вы применили стили этого метода замены изображений.</li>
</ul>
<p>Стоит отметить, что <a href="http://nicolasgallagher.com/css-image-replacement-with-pseudo-elements/">техника замены изображений NIR</a> свободна от этих недостатков, но не работает в IE6/7.</p>
<h2>Комментарии в заключение</h2>
<p>Я использую эту технику без значительных проблем уже около года, с тех пор как Джонатан Нил и я использовали её в эксперименте с clearfix. Фреймворк БЭМ также использует её для иконок. Основная идея <a href="http://www.maxdesign.com.au/articles/headings-as-images/">была предложена еще в 2003 году</a>, но браузерные проблемых тех дней не давали возможности для широкого использования.</p>
<p>Если вы встретитесь с любыми проблемами этой техники, пожалуйста, занесите их в <a href="https://github.com/h5bp/html5-boilerplate/issues">багтрекер на гитхабе HTML5 Boilerplate</a>, и приложите, если нужно, тестовый пример.</p>
<p>Перевод оригинальной записи «<a href="http://nicolasgallagher.com/another-css-image-replacement-technique/">Another CSS image replacement technique</a>» Николаса Галлахера (Nicolas Gallagher). Переведено и опубликовано с разрешения автора.</p>
<p>Перевод выполнил <a href="http://css-live.ru/">Максим Усачёв</a>.</p></div></main><footer class="footer"><p>2018 © Веб-стандарты</p></footer></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-article-jsx","jsonName":"articles-css-image-replacement-553","path":"/articles/css-image-replacement/"};window.dataPath="804/path---articles-css-image-replacement-553-74a-2FAYg6KoQt5jhFl0ZGPYfNidug";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-fdf6317c57abdf654ada.js"],"component---src-templates-article-list-jsx":["/component---src-templates-article-list-jsx-d6fdd15edf4f8b89c17b.js"],"component---src-templates-article-jsx":["/component---src-templates-article-jsx-da40a148dbaf87f71d30.js"],"component---src-pages-404-jsx":["/component---src-pages-404-jsx-a85f47ff49f987715412.js"],"component---src-pages-events-jsx":["/component---src-pages-events-jsx-4f883960193822a95f04.js"],"component---src-pages-index-jsx":["/component---src-pages-index-jsx-6d406cab1d4cc5f63755.js"]};/*]]>*/</script><script src="/webpack-runtime-1400fd0a68f967e222fb.js" async=""></script><script src="/app-fdf6317c57abdf654ada.js" async=""></script><script src="/component---src-templates-article-jsx-da40a148dbaf87f71d30.js" async=""></script><script src="/0-152a6e34a5c4bf7cd8a5.js" async=""></script></body></html>